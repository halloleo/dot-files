#
# path stuff
#
function prepend_colon_var {
    eval value=\$$1
    rest=""
    if [ -n "$value" ]; then
        rest=$(echo "$value" | sed "s!$2:!!g" | sed "s!$2!!g" | sed 's!:$!!g')
        [ -n "$rest" ] && rest=":$rest"
    fi
    eval export $1=\"$2$rest\"
}
 
function postpend_colon_var {
    eval value=\$$1
    rest=""
    if [ -n "$value" ]; then
        rest=$(echo "$value" | sed "s!:$2!!g" | sed "s!$2!!g" | sed 's!^:!!g')
        [ -n "$rest" ] && rest="$rest:"
    fi
    eval export $1=\"$rest$2\"
}

function clean_colon_var {
    eval value=\$$1
    clean=""
    if [ -n "$value" ]; then
        clean=$(echo "$value" | sed 's!^:!!g')
    fi
    eval export $1=\"$clean\"
}

# the again vexatious PATH stuff
if [ -n "$STORED_PATH" ]; then
    export PATH="$STORED_PATH"
fi

clean_colon_var PATH
prepend_colon_var PATH /usr/local/bin
prepend_colon_var PATH ~/share/bin
prepend_colon_var PATH ~/Dropbox/bin
prepend_colon_var PATH ~/bin
postpend_colon_var PATH ~/.cabal/bin

# prompt
export PS1="$ "

# some needed var constants
export WINHOME="${HOME}" # HOME in non-cygwin style (same on Mac)

# general env vars used only on this machine
export AV_LOG_FORCE_NOCOLOR=yes

# machine-depended env vars
export GIT_EDITOR=emacsclient

# local PYTHON stuff
export VENV=/Users/Shared/Python/venv/
export WORKON_HOME="$VENV"
export PYTHONPATH=$HOME/share/lib/python

#Homebrew stuff
export HOMEBREW_CASK_OPTS='--appdir=/Applications/Optional/Homebrew'

# path to exe of emacs APP
export emacsexe="/Applications/Optional/Homebrew/Emacs.app/Contents/MacOS/Emacs"
export emacsclientexe="/Applications/Optional/Homebrew/Emacs.app/Contents/MacOS/bin/emacsclient"

# completion
if [[ ( -z "$INSIDE_EMACS" || "$EMACS_BASH_COMPLETE" = "t" ) ]]; then
   bind 'set completion-ignore-case on'
fi
[ -f /usr/local/etc/bash_completion ] && . /usr/local/etc/bash_completion   

# some little helper variables
export home_hallo=/Volumes/wurzel/Users/hallo
export home_bridge=/Volumes/gap/Users/bridge
export itunes_ati="/Users/bridge/Music/iTunes Main Library/iTunes Music/Automatically Add to iTunes"

# aliases
alias og='open -a "Google Chrome"'
