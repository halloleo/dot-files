# bash customization for all bashes I use

shopt -s histappend
shopt -s cmdhist
export LESSHISTFILE="-"
export HISTSIZE=100000 # done now via environment.rc, but here as well to be safe
export HISTTIMEFORMAT=" %F %T "
export HISTCONTROL=ignorespace
export PROMPT_COMMAND='history -a'


# ls stuff
alias ll='ls -lh'
alias lld='ls -lhd'
alias lla='ls -lha'
alias l1='ls -1'
alias l1d='ls -1d'

# misc commands
alias g=git
alias gri='grep -i'
alias d='diff'
alias dqr='diff -qr --no-dereference --exclude=".DS_Store" --exclude="._*" --exclude=".git" --exclude=".hg"'

# file system/directories
alias pu='pushd .'
alias po='popd' 

alias findnewest='gfind . -printf "%T@ %Td-%Tm-%TY %TH:%TM %p\n" | sort -n -r  | head | cut -d " " -f 2-'
alias findoldest='gfind . -printf "%T@ %Td-%Tm-%TY %TH:%TM %p\n" | sort -n  | head | cut -d " " -f 2-'
alias findbiggest='gfind . -printf "%s %p\n" | sort -n  -r | head | cut -d " " -f 2-| while read i; do du -h "$i"; done'

isunixfile() { dos2unix < "$1" | cmp - "$1"; res="$?"; [ "$res" -eq 0 ] && echo "$1 is Unix file"; return "$res"; }
isdosfile() { unix2dos < "$1" | cmp - "$1"; res="$?"; [ "$res" -eq 0 ] && echo "$1 is DOS file"; return "$res"; }

#shell stuff
alias listpath='echo $PATH|tr ":" "\n"'
alias listalias="alias|sed 's/=.*$//g'"
alias listvar='(set -o posix; set)'

alias wl='wc -l'
alias se='stty -echo'

alias urlencode='python -c "import sys, urllib as ul; print ul.quote_plus(sys.argv[1])"'
alias urldecode='python -c "import sys, urllib as ul; print ul.unquote_plus(sys.argv[1])"'

# package management
alias fds='stat -f "%Sm" -t "%Y%m%d"' # fds - file date stamp
brew_home() { open -a "Google Chrome" `brew info --json=v1 "$@" | jq -r .[0].homepage`; }
alias pip_upgrade_all='pip freeze --local | grep -v '^\-e' | cut -d = -f 1  | (echo "setuptools" && cat) | (echo "pip" && cat)| xargs -n 1 pip install -U'
alias pip3_upgrade_all='pip3 freeze --local | grep -v '^\-e' | cut -d = -f 1  | (echo "setuptools" && cat) | (echo "pip" && cat)| xargs -n 1 pip3 install -U'

# python stuff
source /usr/local/bin/virtualenvwrapper.sh
alias mkvirtualenv3='mkvirtualenv --python=$(which python3)'
alias davirtualenv='deactivate'                     
alias wovirtualenv='workon'                     

shopt -s nocaseglob
